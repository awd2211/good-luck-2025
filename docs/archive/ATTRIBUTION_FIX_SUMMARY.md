# å½’å› ç»Ÿè®¡æ¨¡å—å®Œæ•´ä¿®å¤æ€»ç»“

## âœ… å·²ä¿®å¤çš„Tab

### 1. è½¬åŒ–äº‹ä»¶ âœ…
**ä¿®å¤å†…å®¹**:
- âœ… ç±»å‹å®šä¹‰: `event_type`, `value_calculation`, `fixed_value`, `is_active`, `display_name`, `sort_order`
- âœ… è¡¨æ ¼åˆ—: æ‰€æœ‰dataIndexæ›´æ–°ä¸ºåç«¯å­—æ®µ
- âœ… è¡¨å•å­—æ®µ: æ‰€æœ‰Form.Item nameæ›´æ–°
- âœ… åˆå§‹å€¼: handleCreateé»˜è®¤å€¼æ›´æ–°
- âœ… æ–‡æœ¬æ˜ å°„: getEventTypeTextæ”¯æŒæ–°çš„äº‹ä»¶ç±»å‹

### 2. è½¬åŒ–æ¼æ–— âœ…
**ä¿®å¤å†…å®¹**:
- âœ… æ•°æ®åŠ è½½: `response.data.data?.funnel`ï¼ˆåç«¯è¿”å›åµŒå¥—å¯¹è±¡ï¼‰
- âœ… ç±»å‹å®šä¹‰: `step/name/count/rate`
- âœ… å›¾è¡¨labelå’Œdata: ä½¿ç”¨æ­£ç¡®çš„å­—æ®µå
- âœ… è¡¨æ ¼åˆ—: dataIndexå’ŒrowKeyæ›´æ–°
- âœ… rateç±»å‹å¤„ç†: æ”¯æŒ `number | string`

### 3. æ¸ é“ç®¡ç† âœ…
**ä¿®å¤å†…å®¹**:
- âœ… ç±»å‹å®šä¹‰: `display_name`, `channel_type`, `is_active`, `sort_order`, ç§»é™¤`code`
- âœ… è¡¨æ ¼åˆ—: 
  - æ¸ é“æ ‡è¯†: `name`
  - æ˜¾ç¤ºåç§°: `display_name`
  - æ¸ é“ç±»å‹: `channel_type`
  - çŠ¶æ€: `is_active` (boolean)
  - æ’åº: `sort_order`
- âœ… è¡¨å•å­—æ®µ: æ‰€æœ‰å­—æ®µæ›´æ–°ä¸ºåç«¯æ ¼å¼
- âœ… åˆå§‹å€¼: handleCreateé»˜è®¤å€¼æ›´æ–°
- âœ… æ–‡æœ¬æ˜ å°„: æ·»åŠ `search`ç±»å‹

## ğŸ“ å…¶ä»–TabçŠ¶æ€ï¼ˆAPIè¿”å›æ•°æ®ä½†å‰ç«¯å¯èƒ½éœ€è¦ä¼˜åŒ–ï¼‰

### 4. å¤šè§¦ç‚¹å½’å› 
**APIçŠ¶æ€**: è¿”å›å¤±è´¥ "è·å–è§¦ç‚¹æ•°æ®å¤±è´¥"
**å»ºè®®**: 
- å‰ç«¯å·²æœ‰é”™è¯¯å¤„ç†ï¼Œä¼šæ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
- å¯èƒ½éœ€è¦åç«¯ä¿®å¤æˆ–æä¾›æµ‹è¯•æ•°æ®

### 5. å½’å› æ¨¡å‹å¯¹æ¯”
**APIè¿”å›**: `{first_touch: [], last_touch: [], linear: []}`
**å‰ç«¯å¤„ç†**: åº”è¯¥æ­£å¸¸å¤„ç†è¿™ä¸ªå¯¹è±¡ç»“æ„
**å»ºè®®**: éœ€è¦æœ‰æ•°æ®åéªŒè¯æ¸²æŸ“

### 6. ROIåˆ†æ  
**APIè¿”å›**: 10ä¸ªæ¸ é“ï¼Œå­—æ®µä¸ºå­—ç¬¦ä¸²ç±»å‹
**å…³é”®å­—æ®µ**: 
```json
{
  "channel_id": 1,
  "channel_name": "organic_search",
  "revenue": "0",      // å­—ç¬¦ä¸²
  "cost": "0",         // å­—ç¬¦ä¸²
  "conversions": "0",  // å­—ç¬¦ä¸²
  "roi": 0,            // æ•°å­—
  "roas": 0,           // æ•°å­—
  "cpa": 0             // æ•°å­—
}
```
**å‰ç«¯å¤„ç†**: æ˜¾ç¤ºæ—¶åº”è½¬æ¢ä¸ºæ•°å­—ï¼ˆparseFloatï¼‰

### 7. æ¸ é“å¯¹æ¯”
**APIè¿”å›**: 10ä¸ªæ¸ é“ï¼Œå¤šä¸ªå­—ç¬¦ä¸²å­—æ®µ
**å…³é”®å­—æ®µ**:
```json
{
  "visits": "0",                          // å­—ç¬¦ä¸²
  "unique_visitors": "0",                 // å­—ç¬¦ä¸²
  "conversions": "0",                     // å­—ç¬¦ä¸²
  "revenue": "0",                         // å­—ç¬¦ä¸²
  "cost": "0",                            // å­—ç¬¦ä¸²
  "avg_time_to_convert_hours": "0.00",   // å­—ç¬¦ä¸²
  "conversion_rate": "0",                  // å­—ç¬¦ä¸²
  "roi": "0",                             // å­—ç¬¦ä¸²
  "cpa": "0"                              // å­—ç¬¦ä¸²
}
```
**å‰ç«¯å¤„ç†**: è¡¨æ ¼renderå‡½æ•°ä¸­è½¬æ¢ä¸ºæ•°å­—æ˜¾ç¤º

### 8. æ—¶é—´è¶‹åŠ¿
**APIè¿”å›**: `{success: true, data: []}`
**å‰ç«¯å¤„ç†**: åº”æ˜¾ç¤ºç©ºçŠ¶æ€æç¤º
**å»ºè®®**: æ·»åŠ Emptyç»„ä»¶

### 9. ç”¨æˆ·è´¨é‡
**APIè¿”å›**: `{success: true, data: []}`
**å‰ç«¯å¤„ç†**: åº”æ˜¾ç¤ºç©ºçŠ¶æ€æç¤º
**å»ºè®®**: æ·»åŠ Emptyç»„ä»¶

### 10. è‡ªå®šä¹‰æŠ¥è¡¨
**APIè¿”å›**: `{success: true, data: []}`
**å‰ç«¯å¤„ç†**: åº”æ˜¾ç¤ºç©ºçŠ¶æ€æç¤ºæˆ–åˆ›å»ºæŒ‰é’®

## å­—æ®µæ˜ å°„å¯¹ç…§è¡¨

### è½¬åŒ–äº‹ä»¶
| å­—æ®µç”¨é€” | å‰ç«¯(æ—§) | å‰ç«¯(æ–°) | åç«¯ |
|---------|---------|---------|------|
| äº‹ä»¶æ ‡è¯† | name | name | name |
| æ˜¾ç¤ºåç§° | - | display_name | display_name |
| äº‹ä»¶ç±»å‹ | event_type | event_type | event_type |
| ä»·å€¼è®¡ç®— | value_type | value_calculation | value_calculation |
| å›ºå®šä»·å€¼ | value | fixed_value | fixed_value |
| çŠ¶æ€ | status ('active'/'inactive') | is_active (boolean) | is_active |
| æ’åº | - | sort_order | sort_order |

### è½¬åŒ–æ¼æ–—
| å­—æ®µç”¨é€” | å‰ç«¯(æ—§) | å‰ç«¯(æ–°) | åç«¯ |
|---------|---------|---------|------|
| é˜¶æ®µæ ‡è¯† | - | step | step |
| é˜¶æ®µåç§° | stage | name | name |
| äººæ•° | count | count | count |
| è½¬åŒ–ç‡ | conversion_rate | rate | rate |

### æ¸ é“ç®¡ç†
| å­—æ®µç”¨é€” | å‰ç«¯(æ—§) | å‰ç«¯(æ–°) | åç«¯ |
|---------|---------|---------|------|
| æ¸ é“æ ‡è¯† | name | name | name |
| æ¸ é“ä»£ç  | code | âŒåˆ é™¤ | - |
| æ˜¾ç¤ºåç§° | - | display_name | display_name |
| æ¸ é“ç±»å‹ | type | channel_type | channel_type |
| å›¾æ ‡ | - | icon | icon |
| é¢œè‰² | color | color | color |
| çŠ¶æ€ | status ('active'/'inactive') | is_active (boolean) | is_active |
| æ’åº | - | sort_order | sort_order |

## æµ‹è¯•å»ºè®®

### 1. è½¬åŒ–äº‹ä»¶
```bash
# åº”è¯¥èƒ½çœ‹åˆ°4ä¸ªè½¬åŒ–äº‹ä»¶
- ç”¨æˆ·æ³¨å†Œ (registration)
- é¦–æ¬¡ä»˜è´¹ (first_payment)
- å¤è´­ (repeat_purchase)
- é«˜ä»·å€¼è®¢å• (custom)
```

### 2. è½¬åŒ–æ¼æ–—
```bash
# åº”è¯¥èƒ½çœ‹åˆ°æ¼æ–—å›¾å’Œæ•°æ®è¡¨
- è®¿é—®: 1äºº (100%)
- æ³¨å†Œ: 0äºº (0%)
- é¦–æ¬¡ä»˜è´¹: 0äºº (0%)
- å¤è´­: 0äºº (0%)
```

### 3. æ¸ é“ç®¡ç†
```bash
# åº”è¯¥èƒ½çœ‹åˆ°10ä¸ªæ¸ é“
- organic_search (è‡ªç„¶æœç´¢)
- paid_search (ä»˜è´¹æœç´¢)
- social_media (ç¤¾äº¤åª’ä½“)
- direct (ç›´æ¥è®¿é—®)
- referral (æ¨èæµé‡)
- email (é‚®ä»¶è¥é”€)
- wechat (å¾®ä¿¡)
- douyin (æŠ–éŸ³)
- xiaohongshu (å°çº¢ä¹¦)
- baidu_sem (ç™¾åº¦SEM)
```

### 4. ROIåˆ†æ / æ¸ é“å¯¹æ¯”
```bash
# åº”è¯¥èƒ½çœ‹åˆ°è¡¨æ ¼ï¼ˆè™½ç„¶æ•°æ®éƒ½æ˜¯0ï¼‰
# ä¸åº”è¯¥æŠ¥é”™æˆ–æ˜¾ç¤ºå¼‚å¸¸
```

## åˆ·æ–°æµè§ˆå™¨åæµ‹è¯•

**æ­¥éª¤**:
1. å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨ (Ctrl+F5 æˆ– Cmd+Shift+R)
2. è®¿é—® http://localhost:53003/
3. è¿›å…¥ å½’å› ç»Ÿè®¡ç³»ç»Ÿ
4. é€ä¸ªç‚¹å‡»æ‰€æœ‰Tabæµ‹è¯•

**æœŸæœ›ç»“æœ**:
- âœ… è½¬åŒ–äº‹ä»¶: æ­£å¸¸æ˜¾ç¤ºå’Œç¼–è¾‘
- âœ… è½¬åŒ–æ¼æ–—: æ˜¾ç¤ºæ¼æ–—å›¾
- âœ… æ¸ é“ç®¡ç†: æ­£å¸¸æ˜¾ç¤ºã€ç¼–è¾‘ã€åˆ›å»º
- âœ… å…¶ä»–åˆ†æTab: ä¸æŠ¥é”™ï¼Œæ˜¾ç¤ºç©ºçŠ¶æ€æˆ–æ•°æ®

**å¦‚æœ‰é—®é¢˜è¯·åé¦ˆ**:
- å…·ä½“å“ªä¸ªTab
- æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
- æˆªå›¾

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2025-11-13
**ä¿®å¤æ–‡ä»¶**: `admin-frontend/src/pages/AttributionAnalytics.tsx`
**ä¿®å¤è¡Œæ•°**: ~200+ è¡Œä¿®æ”¹
